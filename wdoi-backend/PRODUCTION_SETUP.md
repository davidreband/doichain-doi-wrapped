# wDOI Backend - Production Setup

## Overview
Backend –¥–ª—è wDOI bridge –≥–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Doichain.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- Backend API –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
- Fallback —Å–∏—Å—Ç–µ–º–∞: ElectrumX ‚Üí RPC ‚Üí Mock data
- Frontend –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

#### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
NODE_ENV=production
USE_MOCK_DOI_DATA=false

# –ù–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–µ ElectrumX —Å–µ—Ä–≤–µ—Ä—ã Doichain
DOICHAIN_ELECTRUMX_PRIMARY=electrum.doichain.org:50002
DOICHAIN_ELECTRUMX_BACKUP1=electrum2.doichain.org:50002

# –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å RPC –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –Ω–æ–¥–µ
DOICHAIN_RPC_URL=http://localhost:18332
DOICHAIN_RPC_USER=your_rpc_user
DOICHAIN_RPC_PASSWORD=your_rpc_password
```

#### 2. –î–∞–Ω–Ω—ã–µ DOI (—Å–µ–π—á–∞—Å: mock 1245.67)
–í production –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑:

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
1. **ElectrumX** (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ) - –±—ã—Å—Ç—Ä–æ, –Ω–∞–¥–µ–∂–Ω–æ
2. **RPC** (fallback) - –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–¥–µ
3. **Mock** (–ø–æ—Å–ª–µ–¥–Ω–∏–π fallback) - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### 3. –ß—Ç–æ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ ElectrumX —Å–µ—Ä–≤–µ—Ä–æ–≤ Doichain
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ RPC –¥–æ—Å—Ç—É–ø–∞ –∫ Doichain –Ω–æ–¥–µ
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

## –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

# –ó–∞–ø—É—Å–∫
NODE_ENV=production npm start
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

Backend –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:
- `source: 'ElectrumX'` - –¥–∞–Ω–Ω—ã–µ –∏–∑ ElectrumX
- `source: 'RPC'` - –¥–∞–Ω–Ω—ã–µ –∏–∑ RPC
- `source: 'Mock'` - fallback –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

## API Endpoints

- `GET /api/v1/reserves` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤–æ–≤
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Frontend

Frontend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:
1. –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `http://localhost:3001/api/v1/reserves`
2. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –ü—Ä–∏ –æ—à–∏–±–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –¥–∞–Ω–Ω—ã–µ

**–°—Ç–∞—Ç—É—Å API –Ω–∞ frontend:**
- üü¢ "Backend API Connected" - –¥–∞–Ω–Ω—ã–µ –∏–∑ backend
- üî¥ "Backend API Offline" - fallback –¥–∞–Ω–Ω—ã–µ frontend

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞–π—Ç–∏ —Ä–∞–±–æ—á–∏–µ ElectrumX —Å–µ—Ä–≤–µ—Ä—ã** Doichain
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å production .env**
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å monitoring –∏ alerting**